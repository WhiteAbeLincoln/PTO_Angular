<div ng-controller="MembershipCtrl" style="max-width: 864px; margin: auto;" class="md-whiteframe-z1">
    <form  ng-submit="newMember(userForm.$valid)" name="userForm" novalidate>
        <md-tabs md-selected="data.index">
            <md-tab label="Join">
                <div layout="row" layout-sm="column" layout-align="center center" layout-margin>
                    <div>
                        <h2>Join the Centerville High School PTO!</h2>
                        <p>Joining helps support teachers, students, and parents:</p>
                        <ul>
                            <li>PTO Scholarships for Students</li>
                            <li>After-Prom</li>
                            <li>College Information Night</li>
                            <li>Various clubs and activities</li>
                            <li>ELK PRIDE</li>
                            <li>Teacher Recognition Luncheon</li>
                            <li>Academic Volunteer program</li>
                            <li>College and Career fair</li>
                            <li>Open House</li>
                            <li>College Financial Aid Information Night</li>
                            <li>ELK NEWS daily email service</li>
                        </ul>
                    </div>
                    <md-button class="md-raised md-primary" type="button" ng-click="data.accept()">Join</md-button>
                </div>
            </md-tab>
            <md-tab label="You" ng-disabled="!data.accepted">
                <div layout-margin layout="column">
                    <div layout="row" layout-sm="column">
                        <md-input-container flex>
                            <label>First Name</label>
                            <input name="firstName" ng-model="user.first" required>
                            <div ng-messages="userForm.firstName.$error">
                                <div ng-message="required">This is required</div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Last Name</label>
                            <input name="lastName" ng-model="user.last" required>
                            <div ng-messages="userForm.lastName.$error && userForm.lastName.$touched">
                                <div ng-message="required">This is required</div>
                            </div>
                        </md-input-container>
                    </div>
                    <div>
                        <md-input-container flex>
                            <label>Address</label>
                            <input name="address" ng-model="user.address" required>
                            <div ng-messages="userForm.address.$error && userForm.address.$touched">
                                <div ng-message="required">This is required</div>
                            </div>
                        </md-input-container>
                    </div>
                    <div layout="row" layout-sm="column">
                        <md-input-container flex>
                            <label>City</label>
                            <input name="city" ng-model="user.city" required>
                            <div ng-messages="userForm.city.$error && userForm.city.$touched">
                                <div ng-message="required">This is required</div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>State</label>
                            <input name="state" ng-model="user.state" required>
                            <div ng-messages="userForm.state.$error && userForm.state.$touched">
                                <div ng-message="required">This is required</div>
                            </div>
                        </md-input-container>
                        <md-input-container flex>
                            <label>Zip Code</label>
                            <input name="zip" ng-model="user.postalCode" ng-pattern="/(\d{5}[-]\d{4})|(^\d{5}$)/" required>
                            <div ng-messages="userForm.zip.$error && userForm.zip.$touched">
                                <div ng-message="required">This is required</div>
                                <div ng-message="pattern">Must be a valid zip code (12345 or 12345-6789)</div>
                            </div>
                        </md-input-container>
                    </div>
                </div>
            </md-tab>
            <md-tab label="Students" ng-disabled="!data.accepted">
                <div layout-margin>
                    <div>
                        <label>Add a Student</label>
                        <md-slider md-discrete ng-model="numStudents"
                                  ng-change="changeStudents(numStudents)"
                                  step="1" min="1" max="7"></md-slider>
                    </div>
                    <div ng-repeat="student in user.students">
                        <ng-form name="studentForm">
                            <h3 class="md-primary">Student {{$index+1}}</h3>
                            <div layout layout-sm="column">
                               <md-input-container flex>
                                   <label>First Name</label>
                                   <input name="first" ng-model="student.first" required>
                                   <div ng-messages="studentForm.first.$error && studentForm.first.$touched">
                                       <div ng-message="required">This is required</div>
                                   </div>
                               </md-input-container>
                               <md-input-container flex>
                                   <label>Last Name</label>
                                   <input name="last" ng-model="student.last" required>
                                   <div ng-messages="studentForm.last.$error && studentForm.last.$touched">
                                       <div ng-message="required">This is required</div>
                                   </div>
                               </md-input-container>
                            </div>
                            <div layout layout-sm="column">

                                <md-input-container
                                        ng-class="{'md-input-invalid':!studentForm.grade.$valid, 'md-input-has-value':studentForm.grade.valueOf() !== ''}"
                                        flex>
                                    <label ng-if="studentForm.grade.valueOf() == ''">Grade</label>
                                    <select name="grade" class='md-input' ng-model="student.grade" required>
                                        <option value="" disabled selected>Grade</option>
                                        <option value="9">Freshmen</option>
                                        <option value="10">Sophomore</option>
                                        <option value="11">Junior</option>
                                        <option value="12">Senior</option>
                                    </select>
                                    <div ng-messages="studentForm.grade.$error && studentForm.grade.$touched">
                                        <div ng-message="required">This is required</div>
                                    </div>
                                </md-input-container>
                                <md-input-container ng-class="{'md-input-invalid':!studentForm.unit.$valid}" flex>
                                    <select name="unit" class='md-input' ng-model="student.unit" required>
                                        <option value="" disabled selected>Unit</option>
                                        <option value="E">East</option>
                                        <option value="S">South</option>
                                        <option value="W">West</option>
                                    </select>
                                    <div ng-messages="studentForm.unit.$error && studentForm.unit.$touched">
                                        <div ng-message="required">This is required</div>
                                    </div>
                                </md-input-container>
                            </div>
                        </ng-form>
                    </div>

                </div>
            </md-tab>
            <md-tab label="Donate" ng-disabled="!data.accepted">
                <div layout-margin layout="column" layout-align-gt-sm="space-around center">
                    <div>
                        <div layout="column" layout-align="center center" >
                            <h3 ng-model="payment.amount">{{ payment.amount | currency }}</h3>
                        </div>
                        <md-slider ng-model="payment.amount" min="0.00" max="500.00"></md-slider>
                        <div layout="row">
                            <md-input-container flex>
                                <label>First</label>
                                <input name="paymentFirst" id="payment-first" ng-model="payment.first" ng-required="payment.amount > 0">
                                <div ng-messages="userForm.paymentFirst.$error && userForm.paymentFirst.$touched">
                                    <div ng-message="required">This is required</div>
                                </div>
                            </md-input-container>
                            <md-input-container flex>
                                <label>Last</label>
                                <input name="paymentLast" id="payment-last" ng-model="payment.last" ng-required="payment.amount > 0">
                                <div ng-messages="userForm.paymentLast.$error && userForm.paymentLast.$touched">
                                    <div ng-message="required">This is required</div>
                                </div>
                            </md-input-container>
                        </div>
                        <div layout="row">
                            <md-input-container flex="66">
                                <label>Number</label>
                                <input name="paymentNumber" id="payment-number" ng-model="payment.number" ng-required="payment.amount > 0">
                                <div ng-messages="userForm.paymentNumber.$error && userForm.paymentNumber.$touched">
                                    <div ng-message="required">This is required</div>
                                </div>
                            </md-input-container>
                            <md-input-container flex>
                                <label>MM/YY</label>
                                <input name="paymentYear" id="payment-exp" ng-model="payment.exp_date" ng-pattern="/^\d{2}\/\d{2}$/" ng-required="payment.amount > 0">
                                <div ng-messages="userForm.paymentYear.$error && userForm.paymentYear.$touched">
                                    <div ng-message="required">This is required</div>
                                    <div ng-message="pattern">Must be a valid expiration date (MM/YY)</div>
                                </div>
                            </md-input-container>
                            <md-input-container flex>
                                <label>CVC</label>
                                <input name="paymentCVC" id="payment-cvc" ng-model="payment.cvv2" ng-pattern="/^\d{3}$/" ng-required="payment.amount > 0">
                                <div ng-messages="userForm.paymentCVC.$error && userForm.paymentCVC.$touched">
                                    <div ng-message="required">This is required</div>
                                </div>
                            </md-input-container>
                        </div>
                    </div>
                    <div layout-align="center ">
                        <md-button class="md-primary md-raised" type="submit" ng-disabled="userForm.$invalid">Submit</md-button>
                    </div>
                </div>
            </md-tab>
       </md-tabs>

    </form>
</div>
