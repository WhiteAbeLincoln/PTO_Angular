<div ng-controller="CreateDownloadCtrl" class="md-whiteframe-z1">
    <div layout="column" layout-align="space-around center" flex>
        <h1>Create Download</h1>
    </div>
    <form name='dlForm' layout-margin layout-padding novalidate>
        <div layout='row'>
            <div layout='column' flex>
                <div layout="row">
                    <md-select placeholder='Download Type' ng-model="download.type" required> <!-- Maybe good spot for md-autocomplete -->
                        <md-option value="meeting_notes">Meeting Notes</md-option>
                        <md-option value="pictures">Pictures</md-option>
                    </md-select>
                    <h6>new type</h6>
                </div>
                <md-input-container>
                    <label>Name</label>
                    <input type='text' name='dlname' ng-model='download.name' required>
                    <div ng-messages="dlForm.dlname.$error">
                        <div ng-message="required">This is required</div>
                    </div>
                </md-input-container>
                <md-input-container>
                    <label>Short Description</label>
                    <input type='text' name='shortDesc' ng-model='download.shortDesc'>
                </md-input-container>
                <md-input-container>
                    <label>Description</label>
                    <textarea name='desc' ng-model='download.desc' required></textarea>
                    <div ng-messages="dlForm.desc.$error">
                        <div ng-message="required">This is required</div>
                    </div>
                </md-input-container>
            </div>
            <div layout='column' layout-align='center center'>
                <input multiple type="file" id="fileInput" name="file" style='display:none' ng-model="download.file" onchange="angular.element(this).scope().fileChange()">
                <md-button type='button' ng-click="fileUpload()">Upload File</md-button>
                <table>
                    <tr ng-repeat="file in download.files">
                        <td><span>{{file.name}}</span></td>
                        <td><md-progress-circular ng-hide="pgress[$index] == 100" md-mode="indeterminate" value="{{pgress[$index]}}"></md-progress-circular>
                            <md-button ng-show="pgress[$index] == 100" class="md-warn md-button-small" ng-click="removeFile($index)">X</md-button></td>
                    </tr>
                </table>
            </div>
        </div>
        <md-button class='md-raised md-primary' ng-disabled="!download.files.length > 0 || dlForm.$invalid" type='submit'>Save</md-button>
        <pre ng-bind="download | json" style="overflow: auto;"></pre>
        <pre ng-bind="pgress | json"></pre>
    </form>
</div>
